(()=>{"use strict";let e=[];const t=(t,n)=>{o(),e.push({name:t,description:n,todoList:[],active:!0})},o=()=>{e.forEach((e=>e.active=!1))},n=()=>e.filter((e=>1==e.active))[0],s=function(e,t,o){n().todoList.push({name:e,description:t,dueDate:o,completion:!1})},c=document.querySelector(".todo-list"),l=document.querySelector(".tasks"),a=document.querySelector(".project-list"),r=c.querySelector(".delete-items"),i=document.querySelector(".new-list-form"),d=document.querySelector(".new-task-form");function u(){for(;a.firstChild;)a.removeChild(a.firstChild)}function m(){e.forEach(((e,t)=>{let o=document.createElement("li");o.dataset.value=t,o.classList.add(`project${t}`),o.textContent=e.name,a.append(o)}))}function f(){for(;l.firstChild;)l.removeChild(l.firstChild);c.style.display="none"}function p(){let e=document.getElementById("task"),t=document.querySelector(".list-title"),o=n();f(),o&&(o.todoList.forEach(((t,o)=>{let n=document.importNode(e.content,!0),s=n.querySelector("input");s.id=o,s.checked=t.completion,s.dataset.value=o;let c=n.querySelector("label");c.htmlFor=o,c.append(t.name),l.appendChild(n)})),t.textContent=`${o.name} tasks`,k(),c.style.display="block")}function k(){let e=document.querySelector(".task-count"),t=n().todoList.filter((e=>1!=e.completion)).length;e.textContent=`${t} tasks pending`}console.log(r),l.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(n().todoList[Number(e.target.dataset.value)].completion=e.target.checked,console.log(e)),k()})),a.addEventListener("click",(t=>{var n;"li"==t.target.tagName.toLowerCase()&&(n=t.target.dataset.value,o(),e[n].active=!0,console.log(t),console.log(c)),p(),k()})),r.addEventListener("click",(t=>{"clear-tasks"==t.target.id?(f(),n().todoList=n().todoList.filter((e=>0==e.completion)),p()):"clear-list"==t.target.id&&(e.forEach(((t,o)=>{e.splice(o,1)})),u(),f(),m())})),d.addEventListener("submit",(e=>{e.preventDefault();const t=d.firstElementChild.value;console.log(t),console.log(e),""!=t&&(f(),s(t,"abc","01/01/01"),p())})),i.addEventListener("submit",(e=>{e.preventDefault();const o=i.firstElementChild.value;console.log(e),""!=o&&(u(),f(),t(o,"abc"),m())})),t("new Project1","Test run1"),s("new task1","Test Task1","31/12/2020"),s("new task2","Test Task2","31/12/2020"),t("new Project2","Test run2"),s("Project2 task1","Project2 Test Task1","31/12/2020"),s("Project2 task2","Project2 Test Task2","31/12/2020"),s("Project2 task3","Project2 Test Task3","31/12/2020"),s("Project2 task4","Project2 Test Task4","31/12/2020"),e.forEach((e=>console.log(e))),m()})();